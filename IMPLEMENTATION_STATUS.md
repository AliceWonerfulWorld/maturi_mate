# Matsuri Mate 実装状況詳細

## 📋 プロジェクト概要

**Matsuri Mate** は、まつりの準備運営における人手不足を解消するジョブマッチングアプリです。運営者（祭り主催者）と参加者（若者）の2つのユーザータイプに対応し、祭りを中心とした包括的なマッチングプラットフォームを提供します。

---

## 🎯 実装済み画面一覧

### 1. ロール選択画面
- **URL**: `/`
- **ファイル**: `src/app/page.tsx`
- **機能**:
  - 運営者・参加者のロール選択
  - 各ロールの説明と特徴表示
  - 落ち着いたスレート・グレー系のデザイン
  - レスポンシブレイアウト（横並び・縦並び対応）
  - 90%ズーム時のレイアウト最適化
  - グラデーション背景とアニメーション効果

### 2. 参加者側画面

#### 2.1 タスク一覧画面（ホーム）
- **URL**: `/participant`
- **ファイル**: `src/app/participant/page.tsx`
- **機能**:
  - タスク一覧のカード形式表示
  - デバウンス機能付き検索（300ms遅延）
  - タグフィルター機能
  - タスク詳細画面への遷移
  - パフォーマンス最適化（React.memo, useMemo, useCallback）
  - 落ち着いたスレート・グレー系のデザイン
  - ホームボタン（確認ダイアログ付き）
  - スケルトンローディング対応

#### 2.2 タスク詳細画面
- **URL**: `/participant/task/[id]`
- **ファイル**: `src/app/participant/task/[id]/page.tsx`
- **機能**:
  - タスクの詳細情報表示
  - 応募ボタン
  - 運営者情報表示
  - 関連祭りへの直接リンク
  - 統一されたヘッダーデザイン（アイコン付き）
  - 落ち着いた色合い

#### 2.3 プロフィール画面
- **URL**: `/participant/profile`
- **ファイル**: `src/app/participant/profile/page.tsx`
- **機能**:
  - ユーザープロフィール表示
  - レベル・バッジシステム
  - 参加履歴表示
  - 投稿した口コミ履歴表示
  - 運営者からの評価表示
  - 統計情報（レビュー数、平均評価等）
  - ホームボタン（確認ダイアログ付き）

#### 2.4 祭り一覧画面
- **URL**: `/participant/festivals`
- **ファイル**: `src/app/participant/festivals/page.tsx`
- **機能**:
  - 祭り一覧のカード形式表示
  - 検索機能（祭り名・場所で検索）
  - 評価・口コミ数表示
  - 祭り詳細画面への遷移
  - 落ち着いた色合い
  - ホームボタン（確認ダイアログ付き）

#### 2.5 祭り詳細画面
- **URL**: `/participant/festivals/[festivalId]`
- **ファイル**: `src/app/participant/festivals/[festivalId]/page.tsx`
- **機能**:
  - 祭りの詳細情報表示
  - 関連タスク一覧表示
  - 口コミ一覧表示・投稿機能
  - 口コミ検索・フィルタリング機能
  - 評価による並び替え（最新・高評価順）
  - 統一されたヘッダーデザイン（矢印ボタン）
  - 落ち着いた色合い

### 3. 管理者側画面

#### 3.1 ダッシュボード画面
- **URL**: `/organizer`
- **ファイル**: `src/app/organizer/page.tsx`
- **機能**:
  - 統計情報の表示（祭り数、タスク数、応募者数、承認待ち数）
  - 最近の祭り一覧表示
  - 最近のタスク一覧表示
  - 承認待ち応募者一覧表示
  - 各機能へのナビゲーション
  - ホームボタン（確認ダイアログ付き）
  - 落ち着いた色合い

#### 3.2 祭り管理画面
- **URL**: `/organizer/festivals`
- **ファイル**: `src/app/organizer/festivals/page.tsx`
- **機能**:
  - 登録済み祭り一覧表示
  - 検索機能
  - 祭り詳細画面への遷移
  - 新規祭り登録ボタン
  - 統一されたヘッダーデザイン

#### 3.3 祭り登録画面
- **URL**: `/organizer/festivals/register`
- **ファイル**: `src/app/organizer/festivals/register/page.tsx`
- **機能**:
  - 祭り基本情報入力フォーム
  - バリデーション機能
  - 登録完了後の自動リダイレクト
  - 統一されたヘッダーデザイン
  - 落ち着いた色合い

#### 3.4 祭り詳細画面（管理者側）
- **URL**: `/organizer/festivals/[festivalId]`
- **ファイル**: `src/app/organizer/festivals/[festivalId]/page.tsx`
- **機能**:
  - 祭りの詳細情報表示
  - 関連タスク一覧表示
  - 新規タスク登録ボタン
  - タスク管理機能
  - 統一されたヘッダーデザイン（矢印ボタン）
  - 落ち着いた色合い

#### 3.5 タスク登録画面
- **URL**: `/organizer/festivals/[festivalId]/tasks/register`
- **ファイル**: `src/app/organizer/festivals/[festivalId]/tasks/register/page.tsx`
- **機能**:
  - タスク詳細情報入力フォーム
  - パンくずリストによる階層ナビゲーション
  - バリデーション機能
  - 登録完了後の自動リダイレクト
  - 統一されたヘッダーデザイン
  - 落ち着いた色合い

#### 3.6 タスク管理画面
- **URL**: `/organizer/tasks`
- **ファイル**: `src/app/organizer/tasks/page.tsx`
- **機能**:
  - 全タスク一覧表示
  - 検索機能
  - 応募者管理画面へのリンク
  - 統一されたヘッダーデザイン
  - 落ち着いた色合い

#### 3.7 応募者管理画面
- **URL**: `/organizer/applications`
- **ファイル**: `src/app/organizer/applications/page.tsx`
- **機能**:
  - 祭り単位での応募者一覧表示
  - 検索・フィルタリング機能
  - 承認・却下ボタン（リアルタイム状態更新）
  - 応募者詳細情報表示
  - 統一されたヘッダーデザイン
  - 落ち着いた色合い

#### 3.8 参加者評価一覧画面
- **URL**: `/organizer/participants`
- **ファイル**: `src/app/organizer/participants/page.tsx`
- **機能**:
  - 全参加者の一覧表示
  - 検索機能（参加者名・プロフィールで検索）
  - 評価ステータスフィルター（すべて・評価済み・未評価）
  - 参加者の評価状況表示（星評価・評価数）
  - 参加者詳細・評価画面への遷移
  - 統一されたヘッダーデザイン
  - 落ち着いた色合い

#### 3.9 参加者詳細・評価画面
- **URL**: `/organizer/participants/[participantId]`
- **ファイル**: `src/app/organizer/participants/[participantId]/page.tsx`
- **機能**:
  - 参加者の詳細情報表示
  - 過去の評価履歴表示
  - 新規評価フォーム（評価・コメント・スキル・改善点）
  - 評価ステータス選択（優秀・良好・普通・要改善）
  - 評価投稿機能
  - 統一されたヘッダーデザイン
  - 落ち着いた色合い

---

## 🛠️ 技術実装詳細

### フレームワーク・ライブラリ
- **Next.js 14.2.0**: App Router使用
- **React 18.2.0**: 関数コンポーネント、Hooks使用
- **TypeScript**: 型安全性の確保
- **Tailwind CSS**: スタイリング
- **shadcn/ui**: UIコンポーネントライブラリ
- **Lucide React**: アイコンライブラリ
- **Radix UI**: アクセシブルなUIコンポーネント

### パフォーマンス最適化
- **React.memo**: コンポーネントのメモ化
- **useMemo**: 重い計算のメモ化
- **useCallback**: イベントハンドラーのメモ化
- **useDebounce**: 検索入力の最適化（300ms遅延）
- **Next.js最適化**: SWC Minify、Package Import最適化
- **Tree Shaking**: 未使用コードの自動削除
- **画像最適化**: WebP/AVIF形式の自動変換

### カスタムフック・ユーティリティ
- **useDebounce**: 入力デバウンス機能
- **performance.ts**: パフォーマンス測定・仮想スクロール用ユーティリティ
- **HomeButton**: 確認ダイアログ付きホームボタンコンポーネント

### UI/UX設計
- **統一されたデザイン**: 全画面でスレート・グレー系の落ち着いた色合い
- **レスポンシブデザイン**: モバイル・デスクトップ対応
- **アクセシビリティ**: Radix UIによるアクセシブルなコンポーネント
- **アニメーション**: ホバー効果、トランジション
- **確認ダイアログ**: ホームボタンでの誤操作防止

---

## 📱 画面遷移フロー

### 参加者側フロー
```
ロール選択 → タスク一覧 → タスク詳細
           ↓
        祭り一覧 → 祭り詳細
           ↓
        プロフィール
```

### 管理者側フロー
```
ロール選択 → ダッシュボード → 祭り管理 → 祭り詳細 → タスク登録
           ↓                    ↓
        応募者管理 ← タスク管理
           ↓
        参加者評価 → 参加者詳細・評価
```

---

## 🎨 デザインシステム

### カラーパレット
- **メイン**: スレート・グレー系（slate-600, gray-700等）
- **アクセント**: 緑系（参加ボタン等）
- **背景**: 白・薄いグレー系
- **テキスト**: ダークグレー・黒

### コンポーネント統一
- **ヘッダー**: 統一されたパディング、アイコン配置
- **ボタン**: 統一されたスタイル、ホバー効果
- **カード**: 統一されたシャドウ、角丸
- **フォーム**: 統一された入力フィールドスタイル

---

## 🔧 開発環境・設定

### Next.js設定
- **experimental**: optimizePackageImports, optimizeCss
- **compiler**: removeConsole (本番環境)
- **images**: WebP/AVIF対応
- **swcMinify**: 有効
- **modularizeImports**: lucide-react最適化

### TypeScript設定
- **strict**: 有効
- **path mapping**: @/* エイリアス

### 依存関係
- **主要**: React, Next.js, TypeScript
- **UI**: shadcn/ui, Radix UI, Lucide React
- **スタイル**: Tailwind CSS, PostCSS
- **開発**: ESLint, Autoprefixer

---

## 📊 データ構造

### 型定義（src/types/index.ts）
- **User**: ユーザー情報
- **Task**: タスク情報
- **OrganizerTask**: 管理者用タスク情報
- **Festival**: 祭り情報
- **FestivalReview**: 祭りレビュー情報
- **Applicant**: 応募者情報
- **Application**: 応募情報
- **OrganizerEvaluation**: 運営者から参加者への評価情報

### ダミーデータ（src/lib/dummy-data.ts）
- **dummyUser**: 参加者用ユーザーデータ
- **dummyTasks**: タスクデータ
- **dummyOrganizer**: 管理者用ユーザーデータ
- **dummyOrganizerTasks**: 管理者用タスクデータ
- **dummyApplicants**: 応募者データ
- **dummyFestivals**: 祭りデータ
- **dummyFestivalReviews**: 祭りレビューデータ
- **dummyOrganizerEvaluations**: 運営者評価データ

---

## 🚀 今後の拡張予定

### データベース統合
- **Firestore**: NoSQLデータベースへの移行
- **Firebase Auth**: 認証システムの実装
- **セキュリティルール**: データアクセス制御

### 機能拡張
- **プッシュ通知**: 応募状況の通知
- **チャット機能**: 運営者と参加者のコミュニケーション
- **評価システム**: 相互評価機能（運営者→参加者評価は実装済み）
- **地図連携**: 会場位置の表示

### パフォーマンス向上
- **仮想スクロール**: 大量データの効率的表示
- **画像最適化**: 自動リサイズ・圧縮
- **キャッシュ戦略**: データキャッシュの実装

---

## ✅ 実装完了状況

### 画面実装: 100%
- ロール選択画面 ✅
- 参加者側全画面 ✅
- 管理者側全画面 ✅
- 参加者評価機能 ✅

### 機能実装: 100%
- 検索・フィルタリング ✅
- 応募・承認機能 ✅
- ナビゲーション ✅
- 確認ダイアログ ✅
- 参加者評価システム ✅

### デザイン実装: 100%
- 統一されたカラーパレット ✅
- レスポンシブデザイン ✅
- アニメーション・エフェクト ✅

### パフォーマンス最適化: 100%
- メモ化 ✅
- デバウンス ✅
- バンドル最適化 ✅

### 品質保証: 100%
- TypeScript型安全性 ✅
- ESLintエラーなし ✅
- アクセシビリティ対応 ✅

---

**最終更新**: 2024年12月現在
**実装完了度**: 100%

---

## 🆕 最新追加機能（2024年12月）

### 参加者評価システム
- **運営者→参加者評価機能**: 運営者が参加者のパフォーマンスを評価
- **評価一覧画面**: 全参加者の評価状況を一覧表示
- **評価詳細画面**: 個別参加者の評価履歴と新規評価投稿
- **評価データ構造**: 星評価、コメント、スキル、改善点を含む包括的な評価システム
- **ナビゲーション統合**: 運営者ダッシュボードから参加者評価へのアクセス

### 技術的改善
- **型安全性強化**: `OrganizerEvaluation`インターフェース追加
- **ダミーデータ拡張**: 評価データのサンプル実装
- **UI/UX改善**: 落ち着いた色合いへの統一、ナビゲーション最適化
- **エラー修正**: 予約語`eval`の使用回避、Service Worker設定最適化